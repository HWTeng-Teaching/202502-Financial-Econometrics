# 📊 C11Q28 – Truffle Market Equilibrium Analysis (A–F)

This project analyzes the supply and demand system for truffles by estimating structural equations using 2SLS and OLS, computing price elasticity, plotting curves, and comparing equilibrium values.

---

## (a) Rewriting Demand and Supply Equations with Price on LHS

### Demand Equation

Original form:
```math
Q = α₁ + α₂·P + α₃·PS + α₄·DI + eᵈ

## (a) Rewriting Demand and Supply Equations with Price on LHS



## (b) Estimation with Two-Stage Least Squares (2SLS)
library(AER)

# Load data
data("truffles")  # Replace with actual import if needed

# Estimate demand
demand_2sls <- ivreg(P ~ Q + PS + DI | PS + DI + PF, data = truffles)

# Estimate supply
supply_2sls <- ivreg(P ~ Q + PF | PF + PS + DI, data = truffles)

summary(demand_2sls)
summary(supply_2sls)


## (c) Price Elasticity of Demand at Sample Means
mean_P <- 62.724
mean_Q <- 18.458
delta_2 <- -2.6705

elasticity <- (1 / delta_2) * (mean_P / mean_Q)
# Output: -1.2725




## (d) Plotting Supply and Demand Curves
curve_demand <- function(Q) 111.5801 - 2.6705 * Q
curve_supply <- function(Q) 9.2470 + 2.9367 * Q

curve(curve_demand, from = 10, to = 25, col = "blue", ylab = "Price", xlab = "Quantity")
curve(curve_supply, from = 10, to = 25, col = "red", add = TRUE)
legend("topright", legend = c("Demand", "Supply"), col = c("blue", "red"), lty = 1)



## (e) Calculating Market Equilibrium (Structural & Reduced-Form)



## (f)  Comparing OLS vs 2SLS Results
# OLS estimation
demand_ols <- lm(P ~ Q + PS + DI, data = truffles)
supply_ols <- lm(P ~ Q + PF, data = truffles)

summary(demand_ols)
summary(supply_ols)
